(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,48425,e=>{"use strict";var t=e.i(43476),r=e.i(75157);function a({className:e,type:a,...n}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}e.s(["Input",()=>a],93479);var n=e.i(71645),i=e.i(74080),s=e.i(91918),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let a=(0,s.createSlot)(`Primitive.${r}`),i=n.forwardRef((e,n)=>{let{asChild:i,...s}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(i?a:r,{...s,ref:n})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{});function o(e,t){e&&i.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>l,"dispatchDiscreteCustomEvent",()=>o],48425)},87486,e=>{"use strict";var t=e.i(43476),r=e.i(91918),a=e.i(25913),n=e.i(75157);let i=(0,a.cva)("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function s({className:e,variant:a,asChild:s=!1,...l}){let o=s?r.Slot:"span";return(0,t.jsx)(o,{"data-slot":"badge",className:(0,n.cn)(i({variant:a}),e),...l})}e.s(["Badge",()=>s])},96626,e=>{"use strict";var t=e.i(71645),r=e.i(20783),a=e.i(34620),n=e=>{var n;let s,l,{present:o,children:c}=e,d=function(e){var r,n;let[s,l]=t.useState(),o=t.useRef(null),c=t.useRef(e),d=t.useRef("none"),[u,m]=(r=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>n[e][t]??e,r));return t.useEffect(()=>{let e=i(o.current);d.current="mounted"===u?e:"none"},[u]),(0,a.useLayoutEffect)(()=>{let t=o.current,r=c.current;if(r!==e){let a=d.current,n=i(t);e?m("MOUNT"):"none"===n||t?.display==="none"?m("UNMOUNT"):r&&a!==n?m("ANIMATION_OUT"):m("UNMOUNT"),c.current=e}},[e,m]),(0,a.useLayoutEffect)(()=>{if(s){let e,t=s.ownerDocument.defaultView??window,r=r=>{let a=i(o.current).includes(CSS.escape(r.animationName));if(r.target===s&&a&&(m("ANIMATION_END"),!c.current)){let r=s.style.animationFillMode;s.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===s.style.animationFillMode&&(s.style.animationFillMode=r)})}},a=e=>{e.target===s&&(d.current=i(o.current))};return s.addEventListener("animationstart",a),s.addEventListener("animationcancel",r),s.addEventListener("animationend",r),()=>{t.clearTimeout(e),s.removeEventListener("animationstart",a),s.removeEventListener("animationcancel",r),s.removeEventListener("animationend",r)}}m("ANIMATION_END")},[s,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:t.useCallback(e=>{o.current=e?getComputedStyle(e):null,l(e)},[])}}(o),u="function"==typeof c?c({present:d.isPresent}):t.Children.only(c),m=(0,r.useComposedRefs)(d.ref,(n=u,(l=(s=Object.getOwnPropertyDescriptor(n.props,"ref")?.get)&&"isReactWarning"in s&&s.isReactWarning)?n.ref:(l=(s=Object.getOwnPropertyDescriptor(n,"ref")?.get)&&"isReactWarning"in s&&s.isReactWarning)?n.props.ref:n.props.ref||n.ref));return"function"==typeof c||d.isPresent?t.cloneElement(u,{ref:m}):null};function i(e){return e?.animationName||"none"}n.displayName="Presence",e.s(["Presence",()=>n])},3281,e=>{"use strict";let t=(0,e.i(75254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],3281)},43531,e=>{"use strict";var t=e.i(78745);e.s(["Check",()=>t.default])},75379,e=>{"use strict";function t(e){return e.toLocaleString("id-ID")}function r(e){return`Rp ${t(e)}`}function a(e){return`Rp${t(e)}`}e.s(["formatPrice",()=>r,"formatPriceCompact",()=>a])},36428,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),a=e.i(19455),n=e.i(93479),i=e.i(15288),s=e.i(84774),l=e.i(87486),o=e.i(20783),c=e.i(30030),d=e.i(81140),u=e.i(69340),m=e.i(99682),h=e.i(35804),f=e.i(96626),p=e.i(48425),x="Checkbox",[g,v]=(0,c.createContextScope)(x),[b,j]=g(x);function y(e){let{__scopeCheckbox:a,checked:n,children:i,defaultChecked:s,disabled:l,form:o,name:c,onCheckedChange:d,required:m,value:h="on",internal_do_not_use_render:f}=e,[p,g]=(0,u.useControllableState)({prop:n,defaultProp:s??!1,onChange:d,caller:x}),[v,j]=r.useState(null),[y,w]=r.useState(null),k=r.useRef(!1),N=!v||!!o||!!v.closest("form"),C={checked:p,disabled:l,setChecked:g,control:v,setControl:j,name:c,form:o,value:h,hasConsumerStoppedPropagationRef:k,required:m,defaultChecked:!E(s)&&s,isFormControl:N,bubbleInput:y,setBubbleInput:w};return(0,t.jsx)(b,{scope:a,...C,children:"function"==typeof f?f(C):i})}var w="CheckboxTrigger",k=r.forwardRef(({__scopeCheckbox:e,onKeyDown:a,onClick:n,...i},s)=>{let{control:l,value:c,disabled:u,checked:m,required:h,setControl:f,setChecked:x,hasConsumerStoppedPropagationRef:g,isFormControl:v,bubbleInput:b}=j(w,e),y=(0,o.useComposedRefs)(s,f),k=r.useRef(m);return r.useEffect(()=>{let e=l?.form;if(e){let t=()=>x(k.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[l,x]),(0,t.jsx)(p.Primitive.button,{type:"button",role:"checkbox","aria-checked":E(m)?"mixed":m,"aria-required":h,"data-state":I(m),"data-disabled":u?"":void 0,disabled:u,value:c,...i,ref:y,onKeyDown:(0,d.composeEventHandlers)(a,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.composeEventHandlers)(n,e=>{x(e=>!!E(e)||!e),b&&v&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});k.displayName=w;var N=r.forwardRef((e,r)=>{let{__scopeCheckbox:a,name:n,checked:i,defaultChecked:s,required:l,disabled:o,value:c,onCheckedChange:d,form:u,...m}=e;return(0,t.jsx)(y,{__scopeCheckbox:a,checked:i,defaultChecked:s,disabled:o,required:l,onCheckedChange:d,name:n,form:u,value:c,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k,{...m,ref:r,__scopeCheckbox:a}),e&&(0,t.jsx)(P,{__scopeCheckbox:a})]})})});N.displayName=x;var C="CheckboxIndicator",S=r.forwardRef((e,r)=>{let{__scopeCheckbox:a,forceMount:n,...i}=e,s=j(C,a);return(0,t.jsx)(f.Presence,{present:n||E(s.checked)||!0===s.checked,children:(0,t.jsx)(p.Primitive.span,{"data-state":I(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...e.style}})})});S.displayName=C;var T="CheckboxBubbleInput",P=r.forwardRef(({__scopeCheckbox:e,...a},n)=>{let{control:i,hasConsumerStoppedPropagationRef:s,checked:l,defaultChecked:c,required:d,disabled:u,name:f,value:x,form:g,bubbleInput:v,setBubbleInput:b}=j(T,e),y=(0,o.useComposedRefs)(n,b),w=(0,m.usePrevious)(l),k=(0,h.useSize)(i);r.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!s.current;if(w!==l&&e){let r=new Event("click",{bubbles:t});v.indeterminate=E(l),e.call(v,!E(l)&&l),v.dispatchEvent(r)}},[v,w,l,s]);let N=r.useRef(!E(l)&&l);return(0,t.jsx)(p.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??N.current,required:d,disabled:u,name:f,value:x,form:g,...a,tabIndex:-1,ref:y,style:{...a.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function E(e){return"indeterminate"===e}function I(e){return E(e)?"indeterminate":e?"checked":"unchecked"}P.displayName=T;var L=e.i(43531),A=e.i(75157);let R=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)(N,{ref:a,className:(0,A.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:(0,t.jsx)(S,{className:(0,A.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(L.Check,{className:"h-4 w-4"})})}));R.displayName=N.displayName;var M=e.i(67489),O=e.i(3281),H=e.i(75254);let B=(0,H.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),U=(0,H.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),D=(0,H.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var F=e.i(75379);function _(){let[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(new Set),[f,p]=(0,r.useState)(""),[x,g]=(0,r.useState)("ALL"),[v,b]=(0,r.useState)({}),[j,y]=(0,r.useState)("58mm"),[w,k]=(0,r.useState)(!0),[N,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{S()},[]);let S=async()=>{k(!0),C(null);try{console.log("ðŸ”„ Fetching products and categories..."),await Promise.all([T(),P()]),console.log("âœ… Data fetched successfully")}catch(e){console.error("âŒ Error fetching data:",e),C("Gagal memuat data. Silakan refresh halaman.")}finally{k(!1)}},T=async()=>{try{console.log("ðŸ“¦ Fetching products from API...");let e=await fetch("/api/products",{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("ðŸ“¦ Products API response status:",e.status),e.ok){let t=await e.json();console.log("ðŸ“¦ Products data received:",t?.length||0,"items"),console.log("ðŸ“¦ Sample product:",t?.[0]),c(Array.isArray(t)?t:[])}else{let t=await e.text();throw console.error("ðŸ“¦ Products API error:",e.status,t),Error(`HTTP ${e.status}: ${e.statusText}`)}}catch(e){throw console.error("ðŸ“¦ Error fetching products:",e),c([]),e}},P=async()=>{try{console.log("ðŸ“‚ Fetching categories from API...");let e=await fetch("/api/categories",{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("ðŸ“‚ Categories API response status:",e.status),e.ok){let t=await e.json();console.log("ðŸ“‚ Categories data received:",t?.length||0,"items"),u(Array.isArray(t)?t:[])}else{let t=await e.text();throw console.error("ðŸ“‚ Categories API error:",e.status,t),Error(`HTTP ${e.status}: ${e.statusText}`)}}catch(e){throw console.error("ðŸ“‚ Error fetching categories:",e),u([]),e}},E=o.filter(e=>{let t=e.name.toLowerCase().includes(f.toLowerCase())||e.barcode.toLowerCase().includes(f.toLowerCase()),r="ALL"===x||e.categoryId===x;return t&&r}),I=async()=>{let t=o.filter(e=>m.has(e.id));if(0===t.length)return void alert("Pilih produk yang akan dicetak barcode-nya");let r=window.open("","_blank");if(r)try{let{generatePrintHTML:a}=await e.A(86445),n=[];t.forEach(e=>{let t=v[e.id]||1;for(let r=0;r<t;r++)n.push({barcode:e.barcode,productName:e.name,price:e.sellPrice})});let i=a(n,j,F.formatPriceCompact);r.document.open(),r.document.write(i),r.document.close(),setTimeout(()=>{r.print()},100)}catch(e){console.error("Error generating print content:",e),alert("Gagal mencetak barcode. Silakan coba lagi.")}},L=Object.values(v).reduce((e,t)=>e+t,0);return w?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Memuat data produk..."})]})})}):N?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-red-500 mb-4 text-4xl",children:"âš ï¸"}),(0,t.jsx)("p",{className:"text-red-600 mb-4 font-medium",children:N}),(0,t.jsxs)(a.Button,{onClick:S,variant:"outline",children:[(0,t.jsx)(D,{className:"h-4 w-4 mr-2"}),"Coba Lagi"]})]})})}):(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Cetak Barcode"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Pilih produk dan cetak barcode dalam jumlah banyak"})]}),(0,t.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("strong",{children:"Status:"}),(0,t.jsxs)("span",{className:"text-green-600",children:[o.length," produk dimuat, ",d.length," kategori dimuat"]})]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(n.Input,{placeholder:"Cari produk atau barcode...",value:f,onChange:e=>p(e.target.value),className:"w-full"})}),(0,t.jsxs)(M.Select,{value:x,onValueChange:g,children:[(0,t.jsx)(M.SelectTrigger,{className:"w-full sm:w-48",children:(0,t.jsx)(M.SelectValue,{placeholder:"Filter kategori"})}),(0,t.jsxs)(M.SelectContent,{children:[(0,t.jsx)(M.SelectItem,{value:"ALL",children:"Semua Kategori"}),d.map(e=>(0,t.jsx)(M.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)(M.Select,{value:j,onValueChange:e=>y(e),children:[(0,t.jsx)(M.SelectTrigger,{className:"w-full sm:w-48",children:(0,t.jsx)(M.SelectValue,{})}),(0,t.jsxs)(M.SelectContent,{children:[(0,t.jsx)(M.SelectItem,{value:"58mm",children:"58mm Thermal"}),(0,t.jsx)(M.SelectItem,{value:"80mm",children:"80mm Thermal"})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(a.Button,{onClick:I,disabled:0===m.size,className:"whitespace-nowrap",children:[(0,t.jsx)(O.Printer,{className:"h-4 w-4 mr-2"}),"Cetak ",j," (",L," label)"]})})]}),(0,t.jsxs)(i.Card,{children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsxs)(i.CardTitle,{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{children:["Daftar Produk (",E.length,")"]}),(0,t.jsx)(a.Button,{variant:"outline",size:"sm",onClick:()=>{if(m.size===E.length)h(new Set),b({});else{let e=new Set(E.map(e=>e.id)),t={};E.forEach(e=>{t[e.id]=1}),h(e),b(t)}},disabled:0===E.length,children:m.size===E.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(U,{className:"h-4 w-4 mr-2"}),"Batal Pilih Semua"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B,{className:"h-4 w-4 mr-2"}),"Pilih Semua"]})})]})}),(0,t.jsx)(i.CardContent,{children:0===E.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:f||"ALL"!==x?"Tidak ada produk yang sesuai dengan filter":"Belum ada produk. Silakan tambah produk terlebih dahulu."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(s.Table,{children:[(0,t.jsx)(s.TableHeader,{children:(0,t.jsxs)(s.TableRow,{children:[(0,t.jsx)(s.TableHead,{className:"w-12",children:"Pilih"}),(0,t.jsx)(s.TableHead,{children:"Barcode"}),(0,t.jsx)(s.TableHead,{children:"Nama Produk"}),(0,t.jsx)(s.TableHead,{children:"Kategori"}),(0,t.jsx)(s.TableHead,{children:"Harga"}),(0,t.jsx)(s.TableHead,{children:"Stok"}),(0,t.jsx)(s.TableHead,{className:"w-24",children:"Jumlah"})]})}),(0,t.jsx)(s.TableBody,{children:E.map(e=>(0,t.jsxs)(s.TableRow,{children:[(0,t.jsx)(s.TableCell,{children:(0,t.jsx)(R,{checked:m.has(e.id),onCheckedChange:()=>(e=>{let t=new Set(m);if(t.has(e)){t.delete(e);let r={...v};delete r[e],b(r)}else t.add(e),b(t=>({...t,[e]:1}));h(t)})(e.id)})}),(0,t.jsx)(s.TableCell,{className:"font-mono text-sm",children:e.barcode}),(0,t.jsx)(s.TableCell,{className:"font-medium",children:e.name}),(0,t.jsx)(s.TableCell,{children:(0,t.jsx)(l.Badge,{variant:"outline",className:"text-xs",children:e.category||"Uncategorized"})}),(0,t.jsx)(s.TableCell,{className:"font-medium",children:(0,F.formatPrice)(e.sellPrice)}),(0,t.jsx)(s.TableCell,{children:(0,t.jsx)(l.Badge,{variant:e.currentStock<=5?"destructive":"secondary",children:e.currentStock})}),(0,t.jsx)(s.TableCell,{children:m.has(e.id)&&(0,t.jsx)(n.Input,{type:"number",min:"1",max:"100",value:v[e.id]||1,onChange:t=>((e,t)=>{if(t<=0){let t=new Set(m);t.delete(e),h(t);let r={...v};delete r[e],b(r)}else b(r=>({...r,[e]:t}))})(e.id,parseInt(t.target.value)||0),className:"w-16 text-center"})})]},e.id))})]})})})]}),!1]})}e.s(["default",()=>_],36428)},86445,e=>{e.v(t=>Promise.all(["static/chunks/483d2edc30357995.js"].map(t=>e.l(t))).then(()=>t(6372)))}]);