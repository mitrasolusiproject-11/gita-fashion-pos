(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,48425,e=>{"use strict";var t=e.i(43476),a=e.i(932),r=e.i(75157);function s(e){let s,l,i,n,c,d=(0,a.c)(10);return d[0]!==e?({className:s,type:i,...l}=e,d[0]=e,d[1]=s,d[2]=l,d[3]=i):(s=d[1],l=d[2],i=d[3]),d[4]!==s?(n=(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),d[4]=s,d[5]=n):n=d[5],d[6]!==l||d[7]!==n||d[8]!==i?(c=(0,t.jsx)("input",{type:i,"data-slot":"input",className:n,...l}),d[6]=l,d[7]=n,d[8]=i,d[9]=c):c=d[9],c}e.s(["Input",()=>s],93479);var l=e.i(71645),i=e.i(74080),n=e.i(91918),c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let r=(0,n.createSlot)(`Primitive.${a}`),s=l.forwardRef((e,s)=>{let{asChild:l,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(l?r:a,{...i,ref:s})});return s.displayName=`Primitive.${a}`,{...e,[a]:s}},{});function d(e,t){e&&i.flushSync(()=>e.dispatchEvent(t))}e.s(["Primitive",()=>c,"dispatchDiscreteCustomEvent",()=>d],48425)},3281,e=>{"use strict";let t=(0,e.i(75254).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],3281)},43531,e=>{"use strict";var t=e.i(78745);e.s(["Check",()=>t.default])},75379,e=>{"use strict";function t(e){return e.toLocaleString("id-ID")}function a(e){return`Rp ${t(e)}`}function r(e){return`Rp${t(e)}`}e.s(["formatPrice",()=>a,"formatPriceCompact",()=>r])},36428,e=>{"use strict";e.i(47167);var t=e.i(43476),a=e.i(71645),r=e.i(19455),s=e.i(93479),l=e.i(15288),i=e.i(84774),n=e.i(87486),c=e.i(20783),d=e.i(30030),o=e.i(81140),u=e.i(69340),h=e.i(99682),m=e.i(35804),x=e.i(96626),f=e.i(48425),p="Checkbox",[g,b]=(0,d.createContextScope)(p),[j,v]=g(p);function y(e){let{__scopeCheckbox:r,checked:s,children:l,defaultChecked:i,disabled:n,form:c,name:d,onCheckedChange:o,required:h,value:m="on",internal_do_not_use_render:x}=e,[f,g]=(0,u.useControllableState)({prop:s,defaultProp:i??!1,onChange:o,caller:p}),[b,v]=a.useState(null),[y,k]=a.useState(null),w=a.useRef(!1),C=!b||!!c||!!b.closest("form"),N={checked:f,disabled:n,setChecked:g,control:b,setControl:v,name:d,form:c,value:m,hasConsumerStoppedPropagationRef:w,required:h,defaultChecked:!E(i)&&i,isFormControl:C,bubbleInput:y,setBubbleInput:k};return(0,t.jsx)(j,{scope:r,...N,children:"function"==typeof x?x(N):l})}var k="CheckboxTrigger",w=a.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:s,...l},i)=>{let{control:n,value:d,disabled:u,checked:h,required:m,setControl:x,setChecked:p,hasConsumerStoppedPropagationRef:g,isFormControl:b,bubbleInput:j}=v(k,e),y=(0,c.useComposedRefs)(i,x),w=a.useRef(h);return a.useEffect(()=>{let e=n?.form;if(e){let t=()=>p(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[n,p]),(0,t.jsx)(f.Primitive.button,{type:"button",role:"checkbox","aria-checked":E(h)?"mixed":h,"aria-required":m,"data-state":I(h),"data-disabled":u?"":void 0,disabled:u,value:d,...l,ref:y,onKeyDown:(0,o.composeEventHandlers)(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,o.composeEventHandlers)(s,e=>{p(e=>!!E(e)||!e),j&&b&&(g.current=e.isPropagationStopped(),g.current||e.stopPropagation())})})});w.displayName=k;var C=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,name:s,checked:l,defaultChecked:i,required:n,disabled:c,value:d,onCheckedChange:o,form:u,...h}=e;return(0,t.jsx)(y,{__scopeCheckbox:r,checked:l,defaultChecked:i,disabled:c,required:n,onCheckedChange:o,name:s,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{...h,ref:a,__scopeCheckbox:r}),e&&(0,t.jsx)(T,{__scopeCheckbox:r})]})})});C.displayName=p;var N="CheckboxIndicator",S=a.forwardRef((e,a)=>{let{__scopeCheckbox:r,forceMount:s,...l}=e,i=v(N,r);return(0,t.jsx)(x.Presence,{present:s||E(i.checked)||!0===i.checked,children:(0,t.jsx)(f.Primitive.span,{"data-state":I(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:a,style:{pointerEvents:"none",...e.style}})})});S.displayName=N;var P="CheckboxBubbleInput",T=a.forwardRef(({__scopeCheckbox:e,...r},s)=>{let{control:l,hasConsumerStoppedPropagationRef:i,checked:n,defaultChecked:d,required:o,disabled:u,name:x,value:p,form:g,bubbleInput:b,setBubbleInput:j}=v(P,e),y=(0,c.useComposedRefs)(s,j),k=(0,h.usePrevious)(n),w=(0,m.useSize)(l);a.useEffect(()=>{if(!b)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!i.current;if(k!==n&&e){let a=new Event("click",{bubbles:t});b.indeterminate=E(n),e.call(b,!E(n)&&n),b.dispatchEvent(a)}},[b,k,n,i]);let C=a.useRef(!E(n)&&n);return(0,t.jsx)(f.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??C.current,required:o,disabled:u,name:x,value:p,form:g,...r,tabIndex:-1,ref:y,style:{...r.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function E(e){return"indeterminate"===e}function I(e){return E(e)?"indeterminate":e?"checked":"unchecked"}T.displayName=P;var L=e.i(43531),H=e.i(75157);let A=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(C,{ref:r,className:(0,H.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...a,children:(0,t.jsx)(S,{className:(0,H.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(L.Check,{className:"h-4 w-4"})})}));A.displayName=C.displayName;var R=e.i(67489),B=e.i(3281),M=e.i(75254);let $=(0,M.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),_=(0,M.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),z=(0,M.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var D=e.i(75379);function F(){let[c,d]=(0,a.useState)([]),[o,u]=(0,a.useState)([]),[h,m]=(0,a.useState)(new Set),[x,f]=(0,a.useState)(""),[p,g]=(0,a.useState)("ALL"),[b,j]=(0,a.useState)({}),[v,y]=(0,a.useState)("58mm"),[k,w]=(0,a.useState)(!0),[C,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{S()},[]);let S=async()=>{w(!0),N(null);try{console.log("ðŸ”„ Fetching products and categories..."),await Promise.all([P(),T()]),console.log("âœ… Data fetched successfully")}catch(e){console.error("âŒ Error fetching data:",e),N("Gagal memuat data. Silakan refresh halaman.")}finally{w(!1)}},P=async()=>{try{console.log("ðŸ“¦ Fetching products from API...");let e=await fetch("/api/products",{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("ðŸ“¦ Products API response status:",e.status),e.ok){let t=await e.json();console.log("ðŸ“¦ Products data received:",t?.length||0,"items"),console.log("ðŸ“¦ Sample product:",t?.[0]),d(Array.isArray(t)?t:[])}else{let t=await e.text();throw console.error("ðŸ“¦ Products API error:",e.status,t),Error(`HTTP ${e.status}: ${e.statusText}`)}}catch(e){throw console.error("ðŸ“¦ Error fetching products:",e),d([]),e}},T=async()=>{try{console.log("ðŸ“‚ Fetching categories from API...");let e=await fetch("/api/categories",{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("ðŸ“‚ Categories API response status:",e.status),e.ok){let t=await e.json();console.log("ðŸ“‚ Categories data received:",t?.length||0,"items"),u(Array.isArray(t)?t:[])}else{let t=await e.text();throw console.error("ðŸ“‚ Categories API error:",e.status,t),Error(`HTTP ${e.status}: ${e.statusText}`)}}catch(e){throw console.error("ðŸ“‚ Error fetching categories:",e),u([]),e}},E=c.filter(e=>{let t=e.name.toLowerCase().includes(x.toLowerCase())||e.barcode.toLowerCase().includes(x.toLowerCase()),a="ALL"===p||e.categoryId===p;return t&&a}),I=async()=>{let t=c.filter(e=>h.has(e.id));if(0===t.length)return void alert("Pilih produk yang akan dicetak barcode-nya");let a=window.open("","_blank");if(a)try{let{generatePrintHTML:r}=await e.A(86445),s=[];t.forEach(e=>{let t=b[e.id]||1;for(let a=0;a<t;a++)s.push({barcode:e.barcode,productName:e.name,price:e.sellPrice})});let l=r(s,v,D.formatPriceCompact);a.document.open(),a.document.write(l),a.document.close(),setTimeout(()=>{a.print()},100)}catch(e){console.error("Error generating print content:",e),alert("Gagal mencetak barcode. Silakan coba lagi.")}},L=Object.values(b).reduce((e,t)=>e+t,0);return k?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Memuat data produk..."})]})})}):C?(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-red-500 mb-4 text-4xl",children:"âš ï¸"}),(0,t.jsx)("p",{className:"text-red-600 mb-4 font-medium",children:C}),(0,t.jsxs)(r.Button,{onClick:S,variant:"outline",children:[(0,t.jsx)(z,{className:"h-4 w-4 mr-2"}),"Coba Lagi"]})]})})}):(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Cetak Barcode"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Pilih produk dan cetak barcode dalam jumlah banyak"})]}),(0,t.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsx)("strong",{children:"Status:"}),(0,t.jsxs)("span",{className:"text-green-600",children:[c.length," produk dimuat, ",o.length," kategori dimuat"]})]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(s.Input,{placeholder:"Cari produk atau barcode...",value:x,onChange:e=>f(e.target.value),className:"w-full"})}),(0,t.jsxs)(R.Select,{value:p,onValueChange:g,children:[(0,t.jsx)(R.SelectTrigger,{className:"w-full sm:w-48",children:(0,t.jsx)(R.SelectValue,{placeholder:"Filter kategori"})}),(0,t.jsxs)(R.SelectContent,{children:[(0,t.jsx)(R.SelectItem,{value:"ALL",children:"Semua Kategori"}),o.map(e=>(0,t.jsx)(R.SelectItem,{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)(R.Select,{value:v,onValueChange:e=>y(e),children:[(0,t.jsx)(R.SelectTrigger,{className:"w-full sm:w-48",children:(0,t.jsx)(R.SelectValue,{})}),(0,t.jsxs)(R.SelectContent,{children:[(0,t.jsx)(R.SelectItem,{value:"58mm",children:"58mm Thermal"}),(0,t.jsx)(R.SelectItem,{value:"80mm",children:"80mm Thermal"})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsxs)(r.Button,{onClick:I,disabled:0===h.size,className:"whitespace-nowrap",children:[(0,t.jsx)(B.Printer,{className:"h-4 w-4 mr-2"}),"Cetak ",v," (",L," label)"]})})]}),(0,t.jsxs)(l.Card,{children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)(l.CardTitle,{className:"flex items-center justify-between",children:[(0,t.jsxs)("span",{children:["Daftar Produk (",E.length,")"]}),(0,t.jsx)(r.Button,{variant:"outline",size:"sm",onClick:()=>{if(h.size===E.length)m(new Set),j({});else{let e=new Set(E.map(e=>e.id)),t={};E.forEach(e=>{t[e.id]=1}),m(e),j(t)}},disabled:0===E.length,children:h.size===E.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_,{className:"h-4 w-4 mr-2"}),"Batal Pilih Semua"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($,{className:"h-4 w-4 mr-2"}),"Pilih Semua"]})})]})}),(0,t.jsx)(l.CardContent,{children:0===E.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500",children:x||"ALL"!==p?"Tidak ada produk yang sesuai dengan filter":"Belum ada produk. Silakan tambah produk terlebih dahulu."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(i.Table,{children:[(0,t.jsx)(i.TableHeader,{children:(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(i.TableHead,{className:"w-12",children:"Pilih"}),(0,t.jsx)(i.TableHead,{children:"Barcode"}),(0,t.jsx)(i.TableHead,{children:"Nama Produk"}),(0,t.jsx)(i.TableHead,{children:"Kategori"}),(0,t.jsx)(i.TableHead,{children:"Harga"}),(0,t.jsx)(i.TableHead,{children:"Stok"}),(0,t.jsx)(i.TableHead,{className:"w-24",children:"Jumlah"})]})}),(0,t.jsx)(i.TableBody,{children:E.map(e=>(0,t.jsxs)(i.TableRow,{children:[(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(A,{checked:h.has(e.id),onCheckedChange:()=>(e=>{let t=new Set(h);if(t.has(e)){t.delete(e);let a={...b};delete a[e],j(a)}else t.add(e),j(t=>({...t,[e]:1}));m(t)})(e.id)})}),(0,t.jsx)(i.TableCell,{className:"font-mono text-sm",children:e.barcode}),(0,t.jsx)(i.TableCell,{className:"font-medium",children:e.name}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(n.Badge,{variant:"outline",className:"text-xs",children:e.category||"Uncategorized"})}),(0,t.jsx)(i.TableCell,{className:"font-medium",children:(0,D.formatPrice)(e.sellPrice)}),(0,t.jsx)(i.TableCell,{children:(0,t.jsx)(n.Badge,{variant:e.currentStock<=5?"destructive":"secondary",children:e.currentStock})}),(0,t.jsx)(i.TableCell,{children:h.has(e.id)&&(0,t.jsx)(s.Input,{type:"number",min:"1",max:"100",value:b[e.id]||1,onChange:t=>((e,t)=>{if(t<=0){let t=new Set(h);t.delete(e),m(t);let a={...b};delete a[e],j(a)}else j(a=>({...a,[e]:t}))})(e.id,parseInt(t.target.value)||0),className:"w-16 text-center"})})]},e.id))})]})})})]}),!1]})}e.s(["default",()=>F],36428)},86445,e=>{e.v(t=>Promise.all(["static/chunks/483d2edc30357995.js"].map(t=>e.l(t))).then(()=>t(6372)))}]);