(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67181,78938,e=>{"use strict";var r=e.i(43476),t=e.i(71645);async function n(e,r){try{let t=await fetch("/api/auth/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r}),credentials:"include"}),n=await t.json();if(t.ok)return localStorage.setItem("user",JSON.stringify(n.user)),{success:!0,user:n.user};return{success:!1,error:n.error||"Login failed"}}catch(e){return console.error("Login error:",e),{success:!1,error:"Network error"}}}async function o(){try{await fetch("/api/auth/signout",{method:"POST",credentials:"include"}),localStorage.removeItem("user")}catch(e){console.error("Signout error:",e)}}async function s(){try{let e=await fetch("/api/auth/session",{credentials:"include"}),r=await e.json();if(r.user)return localStorage.setItem("user",JSON.stringify(r.user)),r.user;let t=localStorage.getItem("user");if(t)return JSON.parse(t);return null}catch(r){console.error("Session error:",r);let e=localStorage.getItem("user");if(e)return JSON.parse(e);return null}}e.s(["clientSignIn",()=>n,"clientSignOut",()=>o,"getClientSession",()=>s],78938);let i=(0,t.createContext)({user:null,loading:!0,signOut:async()=>{},refreshSession:()=>{}});function a(){return(0,t.useContext)(i)}function c({children:e}){let[n,a]=(0,t.useState)(null),[c,u]=(0,t.useState)(!0);(0,t.useEffect)(()=>{l();let e=()=>{l()};return window.addEventListener("storage",e),window.addEventListener("focus",l),()=>{window.removeEventListener("storage",e),window.removeEventListener("focus",l)}},[]);let l=async()=>{try{let e=await s();a(e)}catch(e){console.error("Session check error:",e),a(null)}finally{u(!1)}},d=async()=>{try{await o(),a(null),window.location.href="/login"}catch(e){console.error("Sign out error:",e)}};return(0,r.jsx)(i.Provider,{value:{user:n,loading:c,signOut:d,refreshSession:()=>{l()}},children:e})}e.s(["default",()=>c,"useAuth",()=>a],67181)}]);