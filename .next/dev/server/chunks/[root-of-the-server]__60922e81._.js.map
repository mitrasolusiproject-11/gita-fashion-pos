{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/KIRO/Gita%20Fashion/gita-fashion/src/lib/schema.ts"],"sourcesContent":["import { sqliteTable, text, integer, real } from 'drizzle-orm/sqlite-core'\r\nimport { relations } from 'drizzle-orm'\r\n\r\n// Users table\r\nexport const users = sqliteTable('users', {\r\n  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),\r\n  email: text('email').notNull().unique(),\r\n  name: text('name').notNull(),\r\n  password: text('password').notNull(),\r\n  role: text('role', { enum: ['ADMIN', 'MANAGER', 'CASHIER'] }).notNull().default('CASHIER'),\r\n  createdAt: integer('created_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n  updatedAt: integer('updated_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n})\r\n\r\n// Categories table\r\nexport const categories = sqliteTable('categories', {\r\n  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),\r\n  name: text('name').notNull().unique(),\r\n  createdAt: integer('created_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n  updatedAt: integer('updated_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n})\r\n\r\n// Products table\r\nexport const products = sqliteTable('products', {\r\n  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),\r\n  barcode: text('barcode').notNull().unique(),\r\n  name: text('name').notNull(),\r\n  categoryId: text('category_id').references(() => categories.id),\r\n  initialStock: integer('initial_stock').notNull().default(0),\r\n  currentStock: integer('current_stock').notNull().default(0),\r\n  sellPrice: real('sell_price').notNull(),\r\n  createdAt: integer('created_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n  updatedAt: integer('updated_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n})\r\n\r\n// Transactions table\r\nexport const transactions = sqliteTable('transactions', {\r\n  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),\r\n  code: text('code').notNull().unique(),\r\n  transactionDate: integer('transaction_date', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n  totalItems: integer('total_items').notNull(),\r\n  cashAmount: real('cash_amount').notNull().default(0),\r\n  transferAmount: real('transfer_amount').notNull().default(0),\r\n  bankName: text('bank_name'),\r\n  paymentProof: text('payment_proof'),\r\n  paymentStatus: text('payment_status', { enum: ['PENDING', 'PAID', 'CANCELLED'] }).notNull().default('PENDING'),\r\n  userId: text('user_id').notNull().references(() => users.id),\r\n  createdAt: integer('created_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n  updatedAt: integer('updated_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n})\r\n\r\n// Outgoing Items table\r\nexport const outgoingItems = sqliteTable('outgoing_items', {\r\n  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),\r\n  date: integer('date', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n  barcode: text('barcode').notNull(),\r\n  productName: text('product_name').notNull(),\r\n  quantity: integer('quantity').notNull(),\r\n  transactionCode: text('transaction_code').notNull().references(() => transactions.code),\r\n  price: real('price').notNull(),\r\n  discountPercent: real('discount_percent').notNull().default(0),\r\n  discountAmount: real('discount_amount').notNull().default(0),\r\n  createdAt: integer('created_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n})\r\n\r\n// Settings table\r\nexport const settings = sqliteTable('settings', {\r\n  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),\r\n  key: text('key').notNull().unique(),\r\n  value: text('value').notNull(),\r\n  createdAt: integer('created_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n  updatedAt: integer('updated_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n})\r\n\r\n// Shifts table (Tutup Kasir)\r\nexport const shifts = sqliteTable('shifts', {\r\n  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),\r\n  userId: text('user_id').notNull().references(() => users.id),\r\n  startTime: integer('start_time', { mode: 'timestamp' }).notNull(),\r\n  endTime: integer('end_time', { mode: 'timestamp' }),\r\n  startingCash: real('starting_cash').notNull().default(0),\r\n  endingCash: real('ending_cash'),\r\n  totalSales: real('total_sales').default(0),\r\n  totalTransactions: integer('total_transactions').default(0),\r\n  totalExpenses: real('total_expenses').default(0),\r\n  status: text('status', { enum: ['OPEN', 'CLOSED'] }).notNull().default('OPEN'),\r\n  notes: text('notes'),\r\n  createdAt: integer('created_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n  updatedAt: integer('updated_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n})\r\n\r\n// Expenses table (Pengeluaran)\r\nexport const expenses = sqliteTable('expenses', {\r\n  id: text('id').primaryKey().$defaultFn(() => crypto.randomUUID()),\r\n  shiftId: text('shift_id').references(() => shifts.id),\r\n  userId: text('user_id').notNull().references(() => users.id),\r\n  category: text('category').notNull(), // 'OPERATIONAL', 'INVENTORY', 'MAINTENANCE', 'OTHER'\r\n  description: text('description').notNull(),\r\n  amount: real('amount').notNull(),\r\n  receipt: text('receipt'), // Optional receipt/proof\r\n  createdAt: integer('created_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n  updatedAt: integer('updated_at', { mode: 'timestamp' }).$defaultFn(() => new Date()),\r\n})\r\n\r\n// Relations\r\nexport const usersRelations = relations(users, ({ many }) => ({\r\n  transactions: many(transactions),\r\n}))\r\n\r\nexport const categoriesRelations = relations(categories, ({ many }) => ({\r\n  products: many(products),\r\n}))\r\n\r\nexport const productsRelations = relations(products, ({ one, many }) => ({\r\n  category: one(categories, {\r\n    fields: [products.categoryId],\r\n    references: [categories.id],\r\n  }),\r\n  outgoingItems: many(outgoingItems),\r\n}))\r\n\r\nexport const transactionsRelations = relations(transactions, ({ one, many }) => ({\r\n  user: one(users, {\r\n    fields: [transactions.userId],\r\n    references: [users.id],\r\n  }),\r\n  outgoingItems: many(outgoingItems),\r\n}))\r\n\r\nexport const outgoingItemsRelations = relations(outgoingItems, ({ one }) => ({\r\n  transaction: one(transactions, {\r\n    fields: [outgoingItems.transactionCode],\r\n    references: [transactions.code],\r\n  }),\r\n  product: one(products, {\r\n    fields: [outgoingItems.barcode],\r\n    references: [products.barcode],\r\n  }),\r\n}))"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/KIRO/Gita%20Fashion/gita-fashion/src/lib/db.ts"],"sourcesContent":["import Database from 'better-sqlite3'\r\nimport { drizzle } from 'drizzle-orm/better-sqlite3'\r\nimport * as schema from './schema'\r\n\r\nconst sqlite = new Database('sqlite.db')\r\nexport const db = drizzle(sqlite, { schema })\r\n\r\nexport default db"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,SAAS,IAAI,sIAAQ,CAAC;AACrB,MAAM,KAAK,IAAA,0KAAO,EAAC,QAAQ;IAAE,QAAA;AAAO;uCAE5B","debugId":null}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/KIRO/Gita%20Fashion/gita-fashion/src/app/api/settings/public/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { db } from '@/lib/db'\r\nimport { settings } from '@/lib/schema'\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const allSettings = await db.select().from(settings)\r\n    \r\n    // Convert to key-value object\r\n    const settingsObj = allSettings.reduce((acc, setting) => {\r\n      acc[setting.key] = setting.value\r\n      return acc\r\n    }, {} as Record<string, string>)\r\n\r\n    // Default values if not set\r\n    const defaultSettings = {\r\n      storeName: 'Gita Fashion',\r\n      storeAddress: 'Jl. Fashion Street No. 123, Jakarta',\r\n      storePhone: '021-12345678',\r\n      storeEmail: 'info@gitafashion.com',\r\n      footerText: 'Terima kasih atas kunjungan Anda!'\r\n    }\r\n\r\n    return NextResponse.json({ ...defaultSettings, ...settingsObj })\r\n  } catch (error) {\r\n    console.error('Error fetching public settings:', error)\r\n    return NextResponse.json({ error: 'Internal server error' }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport const runtime = 'nodejs'"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,cAAc,MAAM,wHAAE,CAAC,MAAM,GAAG,IAAI,CAAC,kIAAQ;QAEnD,8BAA8B;QAC9B,MAAM,cAAc,YAAY,MAAM,CAAC,CAAC,KAAK;YAC3C,GAAG,CAAC,QAAQ,GAAG,CAAC,GAAG,QAAQ,KAAK;YAChC,OAAO;QACT,GAAG,CAAC;QAEJ,4BAA4B;QAC5B,MAAM,kBAAkB;YACtB,WAAW;YACX,cAAc;YACd,YAAY;YACZ,YAAY;YACZ,YAAY;QACd;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,GAAG,eAAe;YAAE,GAAG,WAAW;QAAC;IAChE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF;AAEO,MAAM,UAAU","debugId":null}}]
}