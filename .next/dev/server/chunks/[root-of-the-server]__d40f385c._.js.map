{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/alifisk/project/gita-fashion-pos/src/app/api/uploads/%5Bfilename%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\nimport { readFile } from 'fs/promises'\nimport { join } from 'path'\nimport { existsSync } from 'fs'\n\nexport async function GET(\n  request: NextRequest,\n  context: { params: Promise<{ filename: string }> }\n) {\n  try {\n    const { filename } = await context.params\n    \n    // Use different path for local vs production\n    const isProduction = process.env.NODE_ENV === 'production'\n    const filepath = isProduction\n      ? join('/app/data/uploads', filename)\n      : join(process.cwd(), 'data', 'uploads', filename)\n\n    if (!existsSync(filepath)) {\n      return new NextResponse('File not found', { status: 404 })\n    }\n\n    const fileBuffer = await readFile(filepath)\n    \n    // Determine content type based on file extension\n    const ext = filename.split('.').pop()?.toLowerCase()\n    const contentTypes: Record<string, string> = {\n      'png': 'image/png',\n      'jpg': 'image/jpeg',\n      'jpeg': 'image/jpeg',\n      'gif': 'image/gif',\n      'svg': 'image/svg+xml',\n      'webp': 'image/webp'\n    }\n    \n    const contentType = contentTypes[ext || ''] || 'application/octet-stream'\n\n    return new NextResponse(fileBuffer, {\n      headers: {\n        'Content-Type': contentType,\n        'Cache-Control': 'public, max-age=31536000, immutable'\n      }\n    })\n  } catch (error) {\n    console.error('Error serving file:', error)\n    return new NextResponse('Internal Server Error', { status: 500 })\n  }\n}\n\nexport const runtime = 'nodejs'\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe,IACpB,OAAoB,EACpB,OAAkD;IAElD,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,MAAM;QAEzC,6CAA6C;QAC7C,MAAM,eAAe,oDAAyB;QAC9C,MAAM,WAAW,sCACb,0BACA,IAAA,yGAAI,EAAC,QAAQ,GAAG,IAAI,QAAQ,WAAW;QAE3C,IAAI,CAAC,IAAA,2GAAU,EAAC,WAAW;YACzB,OAAO,IAAI,gJAAY,CAAC,kBAAkB;gBAAE,QAAQ;YAAI;QAC1D;QAEA,MAAM,aAAa,MAAM,IAAA,iIAAQ,EAAC;QAElC,iDAAiD;QACjD,MAAM,MAAM,SAAS,KAAK,CAAC,KAAK,GAAG,IAAI;QACvC,MAAM,eAAuC;YAC3C,OAAO;YACP,OAAO;YACP,QAAQ;YACR,OAAO;YACP,OAAO;YACP,QAAQ;QACV;QAEA,MAAM,cAAc,YAAY,CAAC,OAAO,GAAG,IAAI;QAE/C,OAAO,IAAI,gJAAY,CAAC,YAAY;YAClC,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB;YACnB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,IAAI,gJAAY,CAAC,yBAAyB;YAAE,QAAQ;QAAI;IACjE;AACF;AAEO,MAAM,UAAU","debugId":null}}]
}