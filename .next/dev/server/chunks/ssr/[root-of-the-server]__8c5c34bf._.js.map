{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/alifisk/project/gita-fashion-pos/src/lib/auth-client.ts"],"sourcesContent":["'use client'\n\nexport interface User {\n  id: string\n  email: string\n  name: string\n  role: string\n}\n\nexport async function clientSignIn(email: string, password: string): Promise<{ success: boolean; user?: User; error?: string }> {\n  try {\n    const response = await fetch('/api/auth/signin', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email, password }),\n      credentials: 'include' // Important for cookies\n    })\n\n    const data = await response.json()\n\n    if (response.ok) {\n      // Store user in localStorage as backup\n      localStorage.setItem('user', JSON.stringify(data.user))\n      return { success: true, user: data.user }\n    } else {\n      return { success: false, error: data.error || 'Login failed' }\n    }\n  } catch (error) {\n    console.error('Login error:', error)\n    return { success: false, error: 'Network error' }\n  }\n}\n\nexport async function clientSignOut(): Promise<void> {\n  try {\n    await fetch('/api/auth/signout', { \n      method: 'POST',\n      credentials: 'include'\n    })\n    localStorage.removeItem('user')\n  } catch (error) {\n    console.error('Signout error:', error)\n  }\n}\n\nexport async function getClientSession(): Promise<User | null> {\n  try {\n    // First try to get from server\n    const response = await fetch('/api/auth/session', {\n      credentials: 'include'\n    })\n    const data = await response.json()\n    \n    if (data.user) {\n      localStorage.setItem('user', JSON.stringify(data.user))\n      return data.user\n    }\n    \n    // Fallback to localStorage\n    const stored = localStorage.getItem('user')\n    if (stored) {\n      return JSON.parse(stored)\n    }\n    \n    return null\n  } catch (error) {\n    console.error('Session error:', error)\n    \n    // Fallback to localStorage\n    const stored = localStorage.getItem('user')\n    if (stored) {\n      return JSON.parse(stored)\n    }\n    \n    return null\n  }\n}"],"names":[],"mappings":";;;;;;;;AAAA;AASO,eAAe,aAAa,KAAa,EAAE,QAAgB;IAChE,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,oBAAoB;YAC/C,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;YACvC,aAAa,UAAU,wBAAwB;QACjD;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,SAAS,EAAE,EAAE;YACf,uCAAuC;YACvC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI;YACrD,OAAO;gBAAE,SAAS;gBAAM,MAAM,KAAK,IAAI;YAAC;QAC1C,OAAO;YACL,OAAO;gBAAE,SAAS;gBAAO,OAAO,KAAK,KAAK,IAAI;YAAe;QAC/D;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO;YAAE,SAAS;YAAO,OAAO;QAAgB;IAClD;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,qBAAqB;YAC/B,QAAQ;YACR,aAAa;QACf;QACA,aAAa,UAAU,CAAC;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kBAAkB;IAClC;AACF;AAEO,eAAe;IACpB,IAAI;QACF,+BAA+B;QAC/B,MAAM,WAAW,MAAM,MAAM,qBAAqB;YAChD,aAAa;QACf;QACA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,KAAK,IAAI,EAAE;YACb,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI;YACrD,OAAO,KAAK,IAAI;QAClB;QAEA,2BAA2B;QAC3B,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,QAAQ;YACV,OAAO,KAAK,KAAK,CAAC;QACpB;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kBAAkB;QAEhC,2BAA2B;QAC3B,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,QAAQ;YACV,OAAO,KAAK,KAAK,CAAC;QACpB;QAEA,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///Users/alifisk/project/gita-fashion-pos/src/components/providers/session-provider.tsx"],"sourcesContent":["'use client'\n\nimport { createContext, useContext, useEffect, useState } from 'react'\nimport { getClientSession, clientSignOut } from '@/lib/auth-client'\n\ninterface User {\n  id: string\n  email: string\n  name: string\n  role: string\n}\n\ninterface AuthContextType {\n  user: User | null\n  loading: boolean\n  signOut: () => Promise<void>\n  refreshSession: () => void\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  loading: true,\n  signOut: async () => {},\n  refreshSession: () => {}\n})\n\nexport function useAuth() {\n  return useContext(AuthContext)\n}\n\nexport default function AuthProvider({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    checkSession()\n    \n    // Listen for storage events (when login happens in another tab)\n    const handleStorageChange = () => {\n      checkSession()\n    }\n    \n    window.addEventListener('storage', handleStorageChange)\n    \n    // Also check session when window gets focus\n    window.addEventListener('focus', checkSession)\n    \n    return () => {\n      window.removeEventListener('storage', handleStorageChange)\n      window.removeEventListener('focus', checkSession)\n    }\n  }, [])\n\n  const checkSession = async () => {\n    try {\n      const user = await getClientSession()\n      setUser(user)\n    } catch (error) {\n      console.error('Session check error:', error)\n      setUser(null)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const signOut = async () => {\n    try {\n      await clientSignOut()\n      setUser(null)\n      window.location.href = '/login'\n    } catch (error) {\n      console.error('Sign out error:', error)\n    }\n  }\n\n  const refreshSession = () => {\n    checkSession()\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, loading, signOut, refreshSession }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAmBA,MAAM,4BAAc,IAAA,sNAAa,EAAkB;IACjD,MAAM;IACN,SAAS;IACT,SAAS,WAAa;IACtB,gBAAgB,KAAO;AACzB;AAEO,SAAS;IACd,OAAO,IAAA,mNAAU,EAAC;AACpB;AAEe,SAAS,aAAa,EACnC,QAAQ,EAGT;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR;QAEA,gEAAgE;QAChE,MAAM,sBAAsB;YAC1B;QACF;QAEA,OAAO,gBAAgB,CAAC,WAAW;QAEnC,4CAA4C;QAC5C,OAAO,gBAAgB,CAAC,SAAS;QAEjC,OAAO;YACL,OAAO,mBAAmB,CAAC,WAAW;YACtC,OAAO,mBAAmB,CAAC,SAAS;QACtC;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,gJAAgB;YACnC,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;YACtC,QAAQ;QACV,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,UAAU;QACd,IAAI;YACF,MAAM,IAAA,6IAAa;YACnB,QAAQ;YACR,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,mBAAmB;QACnC;IACF;IAEA,MAAM,iBAAiB;QACrB;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAS;QAAe;kBACnE;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///Users/alifisk/project/gita-fashion-pos/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///Users/alifisk/project/gita-fashion-pos/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///Users/alifisk/project/gita-fashion-pos/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}