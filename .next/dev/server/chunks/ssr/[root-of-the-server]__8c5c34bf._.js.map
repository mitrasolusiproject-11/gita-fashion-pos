{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/KIRO/Gita%20Fashion/gita-fashion/src/lib/auth-client.ts"],"sourcesContent":["'use client'\r\n\r\nexport interface User {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  role: string\r\n}\r\n\r\nexport async function clientSignIn(email: string, password: string): Promise<{ success: boolean; user?: User; error?: string }> {\r\n  try {\r\n    const response = await fetch('/api/auth/signin', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n      credentials: 'include' // Important for cookies\r\n    })\r\n\r\n    const data = await response.json()\r\n\r\n    if (response.ok) {\r\n      // Store user in localStorage as backup\r\n      localStorage.setItem('user', JSON.stringify(data.user))\r\n      return { success: true, user: data.user }\r\n    } else {\r\n      return { success: false, error: data.error || 'Login failed' }\r\n    }\r\n  } catch (error) {\r\n    console.error('Login error:', error)\r\n    return { success: false, error: 'Network error' }\r\n  }\r\n}\r\n\r\nexport async function clientSignOut(): Promise<void> {\r\n  try {\r\n    await fetch('/api/auth/signout', { \r\n      method: 'POST',\r\n      credentials: 'include'\r\n    })\r\n    localStorage.removeItem('user')\r\n  } catch (error) {\r\n    console.error('Signout error:', error)\r\n  }\r\n}\r\n\r\nexport async function getClientSession(): Promise<User | null> {\r\n  try {\r\n    // First try to get from server\r\n    const response = await fetch('/api/auth/session', {\r\n      credentials: 'include'\r\n    })\r\n    const data = await response.json()\r\n    \r\n    if (data.user) {\r\n      localStorage.setItem('user', JSON.stringify(data.user))\r\n      return data.user\r\n    }\r\n    \r\n    // Fallback to localStorage\r\n    const stored = localStorage.getItem('user')\r\n    if (stored) {\r\n      return JSON.parse(stored)\r\n    }\r\n    \r\n    return null\r\n  } catch (error) {\r\n    console.error('Session error:', error)\r\n    \r\n    // Fallback to localStorage\r\n    const stored = localStorage.getItem('user')\r\n    if (stored) {\r\n      return JSON.parse(stored)\r\n    }\r\n    \r\n    return null\r\n  }\r\n}"],"names":[],"mappings":";;;;;;;;AAAA;AASO,eAAe,aAAa,KAAa,EAAE,QAAgB;IAChE,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,oBAAoB;YAC/C,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;YACvC,aAAa,UAAU,wBAAwB;QACjD;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,SAAS,EAAE,EAAE;YACf,uCAAuC;YACvC,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI;YACrD,OAAO;gBAAE,SAAS;gBAAM,MAAM,KAAK,IAAI;YAAC;QAC1C,OAAO;YACL,OAAO;gBAAE,SAAS;gBAAO,OAAO,KAAK,KAAK,IAAI;YAAe;QAC/D;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO;YAAE,SAAS;YAAO,OAAO;QAAgB;IAClD;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,MAAM,qBAAqB;YAC/B,QAAQ;YACR,aAAa;QACf;QACA,aAAa,UAAU,CAAC;IAC1B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kBAAkB;IAClC;AACF;AAEO,eAAe;IACpB,IAAI;QACF,+BAA+B;QAC/B,MAAM,WAAW,MAAM,MAAM,qBAAqB;YAChD,aAAa;QACf;QACA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,IAAI,KAAK,IAAI,EAAE;YACb,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC,KAAK,IAAI;YACrD,OAAO,KAAK,IAAI;QAClB;QAEA,2BAA2B;QAC3B,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,QAAQ;YACV,OAAO,KAAK,KAAK,CAAC;QACpB;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kBAAkB;QAEhC,2BAA2B;QAC3B,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,QAAQ;YACV,OAAO,KAAK,KAAK,CAAC;QACpB;QAEA,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/KIRO/Gita%20Fashion/gita-fashion/src/components/providers/session-provider.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { createContext, useContext, useEffect, useState } from 'react'\r\nimport { getClientSession, clientSignOut } from '@/lib/auth-client'\r\n\r\ninterface User {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  role: string\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  loading: boolean\r\n  signOut: () => Promise<void>\r\n  refreshSession: () => void\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n  user: null,\r\n  loading: true,\r\n  signOut: async () => {},\r\n  refreshSession: () => {}\r\n})\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext)\r\n}\r\n\r\nexport default function AuthProvider({\r\n  children,\r\n}: {\r\n  children: React.ReactNode\r\n}) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    checkSession()\r\n    \r\n    // Listen for storage events (when login happens in another tab)\r\n    const handleStorageChange = () => {\r\n      checkSession()\r\n    }\r\n    \r\n    window.addEventListener('storage', handleStorageChange)\r\n    \r\n    // Also check session when window gets focus\r\n    window.addEventListener('focus', checkSession)\r\n    \r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange)\r\n      window.removeEventListener('focus', checkSession)\r\n    }\r\n  }, [])\r\n\r\n  const checkSession = async () => {\r\n    try {\r\n      const user = await getClientSession()\r\n      setUser(user)\r\n    } catch (error) {\r\n      console.error('Session check error:', error)\r\n      setUser(null)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      await clientSignOut()\r\n      setUser(null)\r\n      window.location.href = '/login'\r\n    } catch (error) {\r\n      console.error('Sign out error:', error)\r\n    }\r\n  }\r\n\r\n  const refreshSession = () => {\r\n    checkSession()\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, loading, signOut, refreshSession }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAHA;;;;AAmBA,MAAM,4BAAc,IAAA,sNAAa,EAAkB;IACjD,MAAM;IACN,SAAS;IACT,SAAS,WAAa;IACtB,gBAAgB,KAAO;AACzB;AAEO,SAAS;IACd,OAAO,IAAA,mNAAU,EAAC;AACpB;AAEe,SAAS,aAAa,EACnC,QAAQ,EAGT;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR;QAEA,gEAAgE;QAChE,MAAM,sBAAsB;YAC1B;QACF;QAEA,OAAO,gBAAgB,CAAC,WAAW;QAEnC,4CAA4C;QAC5C,OAAO,gBAAgB,CAAC,SAAS;QAEjC,OAAO;YACL,OAAO,mBAAmB,CAAC,WAAW;YACtC,OAAO,mBAAmB,CAAC,SAAS;QACtC;IACF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,gJAAgB;YACnC,QAAQ;QACV,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;YACtC,QAAQ;QACV,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,UAAU;QACd,IAAI;YACF,MAAM,IAAA,6IAAa;YACnB,QAAQ;YACR,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,mBAAmB;QACnC;IACF;IAEA,MAAM,iBAAiB;QACrB;IACF;IAEA,qBACE,8OAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAS;YAAS;QAAe;kBACnE;;;;;;AAGP","debugId":null}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/KIRO/Gita%20Fashion/gita-fashion/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/KIRO/Gita%20Fashion/gita-fashion/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/KIRO/Gita%20Fashion/gita-fashion/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}}]
}