{"version":3,"sources":["turbopack:///[project]/src/lib/barcode-print-template.ts"],"sourcesContent":["/**\n * Unified barcode print template for consistent single and bulk printing\n */\n\nexport interface BarcodeData {\n  barcode: string\n  productName?: string\n  price?: number\n}\n\nexport const generatePrintHTML = (\n  barcodes: BarcodeData[],\n  printerSize: '58mm' | '80mm',\n  formatPrice: (price: number) => string\n): string => {\n  const barcodeHTML = barcodes.map(item => `\n    <div class=\"barcode-label\">\n      ${item.productName ? `<div class=\"product-name\">${item.productName.toUpperCase()}</div>` : ''}\n      <div class=\"barcode-image\">\n        <canvas class=\"barcode-canvas\" data-barcode=\"${item.barcode}\"></canvas>\n      </div>\n      <div class=\"barcode-number\">${item.barcode}</div>\n      ${item.price ? `<div class=\"price\">${formatPrice(item.price)}</div>` : ''}\n    </div>\n  `).join('')\n\n  return `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>Print Barcodes</title>\n      <script src=\"https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js\"></script>\n      <style>\n        * {\n          margin: 0;\n          padding: 0;\n          box-sizing: border-box;\n        }\n        \n        /* Thermal printer specific CSS */\n        @media print {\n          @page {\n            size: ${printerSize === '58mm' ? '58mm auto' : '80mm auto'};\n            margin: 0;\n          }\n          \n          body {\n            margin: 0 !important;\n            padding: 2mm !important;\n          }\n          \n          .barcode-container {\n            width: 100% !important;\n          }\n        }\n        \n        body { \n          font-family: Arial, sans-serif; \n          margin: 0;\n          padding: 3mm;\n          background: white;\n          -webkit-print-color-adjust: exact;\n          print-color-adjust: exact;\n        }\n        \n\n        \n        .barcode-container {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 1mm;\n          justify-content: ${barcodes.length === 1 ? 'center' : 'flex-start'};\n          align-items: flex-start;\n        }\n        \n        .barcode-label {\n          width: ${printerSize === '58mm' ? '54mm' : '76mm'};\n          height: ${printerSize === '58mm' ? '24mm' : '28mm'};\n          padding: 0.5mm;\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          page-break-inside: avoid;\n          break-inside: avoid;\n          background: white;\n          box-sizing: border-box;\n          border: 1px solid #ddd;\n          position: relative;\n          gap: 0;\n          margin-bottom: 1mm;\n        }\n        \n        .product-name {\n          font-size: ${printerSize === '58mm' ? '5pt' : '7pt'} !important;\n          font-weight: bold !important;\n          text-align: center !important;\n          line-height: 0.8 !important;\n          height: ${printerSize === '58mm' ? '3mm' : '4mm'};\n          overflow: hidden;\n          display: flex !important;\n          align-items: center !important;\n          justify-content: center !important;\n          word-wrap: break-word;\n          hyphens: auto;\n          color: #000 !important;\n          text-transform: uppercase;\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n        \n        .barcode-image {\n          display: flex !important;\n          align-items: center !important;\n          justify-content: center !important;\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n        \n        .barcode-canvas {\n          max-width: 100% !important;\n          height: ${printerSize === '58mm' ? '15px' : '20px'} !important;\n          display: block !important;\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n        \n        .barcode-number {\n          font-size: ${printerSize === '58mm' ? '7pt' : '10pt'} !important;\n          font-weight: bold !important;\n          letter-spacing: 1px !important;\n          margin: 0 !important;\n          padding: 0 !important;\n          color: #000 !important;\n          font-family: 'Courier New', monospace !important;\n        }\n        \n        .price {\n          font-size: ${printerSize === '58mm' ? '9pt' : '12pt'} !important;\n          font-weight: bold !important;\n          color: #000 !important;\n          margin: 0 !important;\n          padding: 0 !important;\n        }\n        \n        @media print {\n          body { \n            margin: 0 !important; \n            padding: 2mm !important;\n            -webkit-print-color-adjust: exact !important;\n            print-color-adjust: exact !important;\n          }\n          \n          .barcode-container {\n            gap: 0 !important;\n          }\n          \n          .barcode-label { \n            margin: 0 !important;\n            margin-bottom: 0.5mm !important;\n            page-break-inside: avoid !important;\n            break-inside: avoid !important;\n            border: none !important;\n            orphans: 1;\n            widows: 1;\n          }\n          \n          .product-name {\n            font-size: ${printerSize === '58mm' ? '5pt' : '7pt'} !important;\n            color: #000 !important;\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          \n          .barcode-image {\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          \n          .barcode-number {\n            font-size: ${printerSize === '58mm' ? '7pt' : '10pt'} !important;\n            color: #000 !important;\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          \n          .price {\n            font-size: ${printerSize === '58mm' ? '9pt' : '12pt'} !important;\n            color: #000 !important;\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n        }\n      </style>\n    </head>\n    <body>\n      <div class=\"barcode-container\">\n        ${barcodeHTML}\n      </div>\n      \n      <script>\n        // Generate barcodes first\n        function generateBarcodes() {\n          const canvases = document.querySelectorAll('.barcode-canvas');\n          canvases.forEach(canvas => {\n            const barcode = canvas.getAttribute('data-barcode');\n            if (barcode && window.JsBarcode) {\n              JsBarcode(canvas, barcode, {\n                format: 'CODE128',\n                width: ${printerSize === '58mm' ? '1.0' : '1.5'},\n                height: ${printerSize === '58mm' ? '15' : '20'},\n                displayValue: false,\n                margin: 0,\n                background: '#ffffff',\n                lineColor: '#000000'\n              });\n            }\n          });\n        }\n        \n        // Simple print control - content starts from top\n        window.addEventListener('afterprint', function() {\n          console.log('Barcode print completed - closing window');\n          setTimeout(() => window.close(), 500);\n        });\n        \n        // Add paper cut spacing at the end\n        document.addEventListener('DOMContentLoaded', function() {\n          const container = document.querySelector('.barcode-container');\n          if (container) {\n            const spacer = document.createElement('div');\n            spacer.style.height = '5mm';\n            spacer.style.width = '100%';\n            container.appendChild(spacer);\n          }\n        });\n        \n        // Simple and reliable print function\n        function doPrint() {\n          setTimeout(() => {\n            window.print();\n          }, 2000);\n        }\n        \n        // Wait for JsBarcode to load, then generate and print\n        function waitForJsBarcodeAndPrint() {\n          if (typeof window.JsBarcode !== 'undefined') {\n            generateBarcodes();\n            doPrint();\n          } else {\n            setTimeout(waitForJsBarcodeAndPrint, 100);\n          }\n        }\n        \n        // Start the process\n        if (document.readyState === 'complete') {\n          waitForJsBarcodeAndPrint();\n        } else {\n          window.addEventListener('load', waitForJsBarcodeAndPrint);\n        }\n        \n        // Fallback\n        setTimeout(() => {\n          if (typeof window.JsBarcode !== 'undefined') {\n            generateBarcodes();\n          }\n          doPrint();\n        }, 4000);\n      </script>\n    </body>\n    </html>\n  `\n}"],"names":[],"mappings":"kEAUiC,CAC/B,EACA,EACA,KAEA,IAAM,EAAc,EAAS,GAAG,CAAC,GAAQ,CAAC;;MAEtC,EAAE,EAAK,WAAW,CAAG,CAAC,0BAA0B,EAAE,EAAK,WAAW,CAAC,WAAW,GAAG,MAAM,CAAC,CAAG,GAAG;;qDAE/C,EAAE,EAAK,OAAO,CAAC;;kCAElC,EAAE,EAAK,OAAO,CAAC;MAC3C,EAAE,EAAK,KAAK,CAAG,CAAC,mBAAmB,EAAE,EAAY,EAAK,KAAK,EAAE,MAAM,CAAC,CAAG,GAAG;;EAE9E,CAAC,EAAE,IAAI,CAAC,IAER,MAAO,CAAC;;;;;;;;;;;;;;;;kBAgBQ,EAAkB,SAAhB,EAAyB,YAAc,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2BA6B5C,EAAE,AAAoB,MAAX,MAAM,CAAS,SAAW,aAAa;;;;;iBAK5D,EAAkB,SAAhB,EAAyB,OAAS,OAAO;kBAC1C,EAAkB,SAAhB,EAAyB,OAAS,OAAO;;;;;;;;;;;;;;;;;qBAiBxC,EAAkB,SAAhB,EAAyB,MAAQ,MAAM;;;;kBAI5C,EAAkB,SAAhB,EAAyB,MAAQ,MAAM;;;;;;;;;;;;;;;;;;;;;;;kBAuBzC,EAAkB,SAAhB,EAAyB,OAAS,OAAO;;;;;;;qBAOxC,EAAkB,SAAhB,EAAyB,MAAQ,OAAO;;;;;;;;;;qBAU1C,EAAkB,SAAhB,EAAyB,MAAQ,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBA8BxC,EAAkB,SAAhB,EAAyB,MAAQ,MAAM;;;;;;;;;;;;uBAYzC,EAAkB,SAAhB,EAAyB,MAAQ,OAAO;;;;;;;uBAO1C,EAAkB,SAAhB,EAAyB,MAAQ,OAAO;;;;;;;;;;QAUzD,EAAE,YAAY;;;;;;;;;;;;uBAYC,EAAkB,SAAhB,EAAyB,MAAQ,MAAM;wBACxC,EAAkB,SAAhB,EAAyB,KAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA6D7D,CAAC,AACH"}