{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/module.compiled.js","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","turbopack:///[project]/src/components/providers/session-provider.tsx","turbopack:///[project]/src/lib/auth-client.ts"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client'\n\nimport { createContext, useContext, useEffect, useState } from 'react'\nimport { getClientSession, clientSignOut } from '@/lib/auth-client'\n\ninterface User {\n  id: string\n  email: string\n  name: string\n  role: string\n}\n\ninterface AuthContextType {\n  user: User | null\n  loading: boolean\n  signOut: () => Promise<void>\n  refreshSession: () => void\n}\n\nconst AuthContext = createContext<AuthContextType>({\n  user: null,\n  loading: true,\n  signOut: async () => {},\n  refreshSession: () => {}\n})\n\nexport function useAuth() {\n  return useContext(AuthContext)\n}\n\nexport default function AuthProvider({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const [user, setUser] = useState<User | null>(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    checkSession()\n    \n    // Listen for storage events (when login happens in another tab)\n    const handleStorageChange = () => {\n      checkSession()\n    }\n    \n    window.addEventListener('storage', handleStorageChange)\n    \n    // Also check session when window gets focus\n    window.addEventListener('focus', checkSession)\n    \n    return () => {\n      window.removeEventListener('storage', handleStorageChange)\n      window.removeEventListener('focus', checkSession)\n    }\n  }, [])\n\n  const checkSession = async () => {\n    try {\n      const user = await getClientSession()\n      setUser(user)\n    } catch (error) {\n      console.error('Session check error:', error)\n      setUser(null)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const signOut = async () => {\n    try {\n      await clientSignOut()\n      setUser(null)\n      window.location.href = '/login'\n    } catch (error) {\n      console.error('Sign out error:', error)\n    }\n  }\n\n  const refreshSession = () => {\n    checkSession()\n  }\n\n  return (\n    <AuthContext.Provider value={{ user, loading, signOut, refreshSession }}>\n      {children}\n    </AuthContext.Provider>\n  )\n}","'use client'\n\nexport interface User {\n  id: string\n  email: string\n  name: string\n  role: string\n}\n\nexport async function clientSignIn(email: string, password: string): Promise<{ success: boolean; user?: User; error?: string }> {\n  try {\n    const response = await fetch('/api/auth/signin', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email, password }),\n      credentials: 'include' // Important for cookies\n    })\n\n    const data = await response.json()\n\n    if (response.ok) {\n      // Store user in localStorage as backup\n      localStorage.setItem('user', JSON.stringify(data.user))\n      return { success: true, user: data.user }\n    } else {\n      return { success: false, error: data.error || 'Login failed' }\n    }\n  } catch (error) {\n    console.error('Login error:', error)\n    return { success: false, error: 'Network error' }\n  }\n}\n\nexport async function clientSignOut(): Promise<void> {\n  try {\n    await fetch('/api/auth/signout', { \n      method: 'POST',\n      credentials: 'include'\n    })\n    localStorage.removeItem('user')\n  } catch (error) {\n    console.error('Signout error:', error)\n  }\n}\n\nexport async function getClientSession(): Promise<User | null> {\n  try {\n    // First try to get from server\n    const response = await fetch('/api/auth/session', {\n      credentials: 'include'\n    })\n    const data = await response.json()\n    \n    if (data.user) {\n      localStorage.setItem('user', JSON.stringify(data.user))\n      return data.user\n    }\n    \n    // Fallback to localStorage\n    const stored = localStorage.getItem('user')\n    if (stored) {\n      return JSON.parse(stored)\n    }\n    \n    return null\n  } catch (error) {\n    console.error('Session error:', error)\n    \n    // Fallback to localStorage\n    const stored = localStorage.getItem('user')\n    if (stored) {\n      return JSON.parse(stored)\n    }\n    \n    return null\n  }\n}"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}