{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/module.compiled.js","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","turbopack:///[project]/src/components/providers/session-provider.tsx","turbopack:///[project]/src/lib/auth-client.ts"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client'\r\n\r\nimport { createContext, useContext, useEffect, useState } from 'react'\r\nimport { getClientSession, clientSignOut } from '@/lib/auth-client'\r\n\r\ninterface User {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  role: string\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null\r\n  loading: boolean\r\n  signOut: () => Promise<void>\r\n  refreshSession: () => void\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n  user: null,\r\n  loading: true,\r\n  signOut: async () => {},\r\n  refreshSession: () => {}\r\n})\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext)\r\n}\r\n\r\nexport default function AuthProvider({\r\n  children,\r\n}: {\r\n  children: React.ReactNode\r\n}) {\r\n  const [user, setUser] = useState<User | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    checkSession()\r\n    \r\n    // Listen for storage events (when login happens in another tab)\r\n    const handleStorageChange = () => {\r\n      checkSession()\r\n    }\r\n    \r\n    window.addEventListener('storage', handleStorageChange)\r\n    \r\n    // Also check session when window gets focus\r\n    window.addEventListener('focus', checkSession)\r\n    \r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange)\r\n      window.removeEventListener('focus', checkSession)\r\n    }\r\n  }, [])\r\n\r\n  const checkSession = async () => {\r\n    try {\r\n      const user = await getClientSession()\r\n      setUser(user)\r\n    } catch (error) {\r\n      console.error('Session check error:', error)\r\n      setUser(null)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const signOut = async () => {\r\n    try {\r\n      await clientSignOut()\r\n      setUser(null)\r\n      window.location.href = '/login'\r\n    } catch (error) {\r\n      console.error('Sign out error:', error)\r\n    }\r\n  }\r\n\r\n  const refreshSession = () => {\r\n    checkSession()\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, loading, signOut, refreshSession }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  )\r\n}","'use client'\r\n\r\nexport interface User {\r\n  id: string\r\n  email: string\r\n  name: string\r\n  role: string\r\n}\r\n\r\nexport async function clientSignIn(email: string, password: string): Promise<{ success: boolean; user?: User; error?: string }> {\r\n  try {\r\n    const response = await fetch('/api/auth/signin', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ email, password }),\r\n      credentials: 'include' // Important for cookies\r\n    })\r\n\r\n    const data = await response.json()\r\n\r\n    if (response.ok) {\r\n      // Store user in localStorage as backup\r\n      localStorage.setItem('user', JSON.stringify(data.user))\r\n      return { success: true, user: data.user }\r\n    } else {\r\n      return { success: false, error: data.error || 'Login failed' }\r\n    }\r\n  } catch (error) {\r\n    console.error('Login error:', error)\r\n    return { success: false, error: 'Network error' }\r\n  }\r\n}\r\n\r\nexport async function clientSignOut(): Promise<void> {\r\n  try {\r\n    await fetch('/api/auth/signout', { \r\n      method: 'POST',\r\n      credentials: 'include'\r\n    })\r\n    localStorage.removeItem('user')\r\n  } catch (error) {\r\n    console.error('Signout error:', error)\r\n  }\r\n}\r\n\r\nexport async function getClientSession(): Promise<User | null> {\r\n  try {\r\n    // First try to get from server\r\n    const response = await fetch('/api/auth/session', {\r\n      credentials: 'include'\r\n    })\r\n    const data = await response.json()\r\n    \r\n    if (data.user) {\r\n      localStorage.setItem('user', JSON.stringify(data.user))\r\n      return data.user\r\n    }\r\n    \r\n    // Fallback to localStorage\r\n    const stored = localStorage.getItem('user')\r\n    if (stored) {\r\n      return JSON.parse(stored)\r\n    }\r\n    \r\n    return null\r\n  } catch (error) {\r\n    console.error('Session error:', error)\r\n    \r\n    // Fallback to localStorage\r\n    const stored = localStorage.getItem('user')\r\n    if (stored) {\r\n      return JSON.parse(stored)\r\n    }\r\n    \r\n    return null\r\n  }\r\n}"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"0NA0BQG,EAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEE,KAAK,gDCA9B,EAAA,EAAA,CAAA,CAAA,OCOO,eAAe,EAAa,CAAa,CAAE,CAAgB,EAChE,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,mBAAoB,CAC/C,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,OAAE,WAAO,CAAS,GACvC,YAAa,SACf,CADyB,EAGnB,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,EAAS,AALoC,EAKlC,CAGb,CAHe,MAEf,aAAa,OAAO,CAAC,OAAQ,KAAK,SAAS,CAAC,EAAK,IAAI,GAC9C,CAAE,SAAS,EAAM,KAAM,EAAK,IAAK,AAAD,EAEvC,MAAO,CAAE,QAAS,GAAO,MAAO,EAAK,KAAK,EAAI,cAAe,CAEjE,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,eAAgB,GACvB,CAAE,SAAS,EAAO,MAAO,eAAgB,CAClD,CACF,CAEO,eAAe,IACpB,GAAI,CACF,MAAM,MAAM,oBAAqB,CAC/B,OAAQ,OACR,YAAa,SACf,GACA,aAAa,UAAU,CAAC,OAC1B,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,iBAAkB,EAClC,CACF,CAEO,eAAe,IACpB,GAAI,CAEF,IAAM,EAAW,MAAM,MAAM,oBAAqB,CAChD,YAAa,SACf,GACM,EAAO,MAAM,EAAS,IAAI,GAEhC,GAAI,EAAK,IAAI,CAEX,CAFa,MACb,aAAa,OAAO,CAAC,OAAQ,KAAK,SAAS,CAAC,EAAK,IAAI,GAC9C,EAAK,IAAI,CAIlB,IAAM,EAAS,aAAa,OAAO,CAAC,QACpC,GAAI,EACF,MADU,CACH,KAAK,KAAK,CAAC,GAGpB,OAAO,IACT,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,iBAAkB,GAGhC,IAAM,EAAS,aAAa,OAAO,CAAC,QACpC,GAAI,EACF,MADU,CACH,KAAK,KAAK,CAAC,GAGpB,OAAO,IACT,CACF,kFD3DA,IAAM,EAAc,CAAA,EAAA,EAAA,aAAA,AAAa,EAAkB,CACjD,KAAM,KACN,SAAS,EACT,QAAS,UAAa,EACtB,eAAgB,KAAO,CACzB,GAEO,SAAS,IACd,MAAO,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,EACpB,CAEe,SAAS,EAAa,UACnC,CAAQ,CAGT,EACC,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MACxC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEvC,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,IAGA,IAAM,EAAsB,KAC1B,GACF,EAOA,OALA,OAAO,gBAAgB,CAAC,UAAW,GAGnC,OAAO,gBAAgB,CAAC,QAAS,GAE1B,KACL,OAAO,mBAAmB,CAAC,UAAW,GACtC,OAAO,mBAAmB,CAAC,QAAS,EACtC,CACF,EAAG,EAAE,EAEL,IAAM,EAAe,UACnB,GAAI,CACF,IAAM,EAAO,MAAM,IACnB,EAAQ,EACV,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,uBAAwB,GACtC,EAAQ,KACV,QAAU,CACR,GAAW,EACb,CACF,EAEM,EAAU,UACd,GAAI,CACF,MAAM,IACN,EAAQ,MACR,OAAO,QAAQ,CAAC,IAAI,CAAG,QACzB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,kBAAmB,EACnC,CACF,EAMA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAY,QAAQ,CAAA,CAAC,MAAO,MAAE,UAAM,UAAS,EAAS,eALlC,KACrB,GACF,CAGwE,WACnE,GAGP","ignoreList":[0,1,2]}