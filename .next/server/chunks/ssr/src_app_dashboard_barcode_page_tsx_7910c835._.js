module.exports=[90704,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(91119),g=a.i(6015),h=a.i(86304),i=a.i(70121),j=a.i(50104),k=a.i(7554),l=a.i(25152),m=a.i(77994),n=a.i(3688),o=a.i(77192),p=a.i(30553),q="Checkbox",[r,s]=(0,j.createContextScope)(q),[t,u]=r(q);function v(a){let{__scopeCheckbox:d,checked:e,children:f,defaultChecked:g,disabled:h,form:i,name:j,onCheckedChange:k,required:m,value:n="on",internal_do_not_use_render:o}=a,[p,r]=(0,l.useControllableState)({prop:e,defaultProp:g??!1,onChange:k,caller:q}),[s,u]=c.useState(null),[v,w]=c.useState(null),x=c.useRef(!1),y=!s||!!i||!!s.closest("form"),z={checked:p,disabled:h,setChecked:r,control:s,setControl:u,name:j,form:i,value:n,hasConsumerStoppedPropagationRef:x,required:m,defaultChecked:!D(g)&&g,isFormControl:y,bubbleInput:v,setBubbleInput:w};return(0,b.jsx)(t,{scope:d,...z,children:"function"==typeof o?o(z):f})}var w="CheckboxTrigger",x=c.forwardRef(({__scopeCheckbox:a,onKeyDown:d,onClick:e,...f},g)=>{let{control:h,value:j,disabled:l,checked:m,required:n,setControl:o,setChecked:q,hasConsumerStoppedPropagationRef:r,isFormControl:s,bubbleInput:t}=u(w,a),v=(0,i.useComposedRefs)(g,o),x=c.useRef(m);return c.useEffect(()=>{let a=h?.form;if(a){let b=()=>q(x.current);return a.addEventListener("reset",b),()=>a.removeEventListener("reset",b)}},[h,q]),(0,b.jsx)(p.Primitive.button,{type:"button",role:"checkbox","aria-checked":D(m)?"mixed":m,"aria-required":n,"data-state":E(m),"data-disabled":l?"":void 0,disabled:l,value:j,...f,ref:v,onKeyDown:(0,k.composeEventHandlers)(d,a=>{"Enter"===a.key&&a.preventDefault()}),onClick:(0,k.composeEventHandlers)(e,a=>{q(a=>!!D(a)||!a),t&&s&&(r.current=a.isPropagationStopped(),r.current||a.stopPropagation())})})});x.displayName=w;var y=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,name:e,checked:f,defaultChecked:g,required:h,disabled:i,value:j,onCheckedChange:k,form:l,...m}=a;return(0,b.jsx)(v,{__scopeCheckbox:d,checked:f,defaultChecked:g,disabled:i,required:h,onCheckedChange:k,name:e,form:l,value:j,internal_do_not_use_render:({isFormControl:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(x,{...m,ref:c,__scopeCheckbox:d}),a&&(0,b.jsx)(C,{__scopeCheckbox:d})]})})});y.displayName=q;var z="CheckboxIndicator",A=c.forwardRef((a,c)=>{let{__scopeCheckbox:d,forceMount:e,...f}=a,g=u(z,d);return(0,b.jsx)(o.Presence,{present:e||D(g.checked)||!0===g.checked,children:(0,b.jsx)(p.Primitive.span,{"data-state":E(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c,style:{pointerEvents:"none",...a.style}})})});A.displayName=z;var B="CheckboxBubbleInput",C=c.forwardRef(({__scopeCheckbox:a,...d},e)=>{let{control:f,hasConsumerStoppedPropagationRef:g,checked:h,defaultChecked:j,required:k,disabled:l,name:o,value:q,form:r,bubbleInput:s,setBubbleInput:t}=u(B,a),v=(0,i.useComposedRefs)(e,t),w=(0,m.usePrevious)(h),x=(0,n.useSize)(f);c.useEffect(()=>{if(!s)return;let a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,b=!g.current;if(w!==h&&a){let c=new Event("click",{bubbles:b});s.indeterminate=D(h),a.call(s,!D(h)&&h),s.dispatchEvent(c)}},[s,w,h,g]);let y=c.useRef(!D(h)&&h);return(0,b.jsx)(p.Primitive.input,{type:"checkbox","aria-hidden":!0,defaultChecked:j??y.current,required:k,disabled:l,name:o,value:q,form:r,...d,tabIndex:-1,ref:v,style:{...d.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function D(a){return"indeterminate"===a}function E(a){return D(a)?"indeterminate":a?"checked":"unchecked"}C.displayName=B;var F=a.i(33441),G=a.i(68114);let H=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(y,{ref:d,className:(0,G.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...c,children:(0,b.jsx)(A,{className:(0,G.cn)("flex items-center justify-center text-current"),children:(0,b.jsx)(F.Check,{className:"h-4 w-4"})})}));H.displayName=y.displayName;var I=a.i(80701),J=a.i(71931),K=a.i(70106);let L=(0,K.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),M=(0,K.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),N=(0,K.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var O=a.i(90075);function P(){let[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(new Set),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)("ALL"),[s,t]=(0,c.useState)({}),[u,v]=(0,c.useState)("58mm"),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(null);(0,c.useEffect)(()=>{A()},[]);let A=async()=>{x(!0),z(null);try{console.log("ðŸ”„ Fetching products and categories..."),await Promise.all([B(),C()]),console.log("âœ… Data fetched successfully")}catch(a){console.error("âŒ Error fetching data:",a),z("Gagal memuat data. Silakan refresh halaman.")}finally{x(!1)}},B=async()=>{try{console.log("ðŸ“¦ Fetching products from API...");let a=await fetch("/api/products",{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("ðŸ“¦ Products API response status:",a.status),a.ok){let b=await a.json();console.log("ðŸ“¦ Products data received:",b?.length||0,"items"),console.log("ðŸ“¦ Sample product:",b?.[0]),j(Array.isArray(b)?b:[])}else{let b=await a.text();throw console.error("ðŸ“¦ Products API error:",a.status,b),Error(`HTTP ${a.status}: ${a.statusText}`)}}catch(a){throw console.error("ðŸ“¦ Error fetching products:",a),j([]),a}},C=async()=>{try{console.log("ðŸ“‚ Fetching categories from API...");let a=await fetch("/api/categories",{credentials:"include",headers:{"Content-Type":"application/json"}});if(console.log("ðŸ“‚ Categories API response status:",a.status),a.ok){let b=await a.json();console.log("ðŸ“‚ Categories data received:",b?.length||0,"items"),l(Array.isArray(b)?b:[])}else{let b=await a.text();throw console.error("ðŸ“‚ Categories API error:",a.status,b),Error(`HTTP ${a.status}: ${a.statusText}`)}}catch(a){throw console.error("ðŸ“‚ Error fetching categories:",a),l([]),a}},D=i.filter(a=>{let b=a.name.toLowerCase().includes(o.toLowerCase())||a.barcode.toLowerCase().includes(o.toLowerCase()),c="ALL"===q||a.categoryId===q;return b&&c}),E=async()=>{let b=i.filter(a=>m.has(a.id));if(0===b.length)return void alert("Pilih produk yang akan dicetak barcode-nya");let c=window.open("","_blank");if(c)try{let{generatePrintHTML:d}=await a.A(11723),e=[];b.forEach(a=>{let b=s[a.id]||1;for(let c=0;c<b;c++)e.push({barcode:a.barcode,productName:a.name,price:a.sellPrice})});let f=d(e,u,O.formatPriceCompact);c.document.open(),c.document.write(f),c.document.close(),setTimeout(()=>{c.print()},100)}catch(a){console.error("Error generating print content:",a),alert("Gagal mencetak barcode. Silakan coba lagi.")}},F=Object.values(s).reduce((a,b)=>a+b,0);return w?(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Memuat data produk..."})]})})}):y?(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-red-500 mb-4 text-4xl",children:"âš ï¸"}),(0,b.jsx)("p",{className:"text-red-600 mb-4 font-medium",children:y}),(0,b.jsxs)(d.Button,{onClick:A,variant:"outline",children:[(0,b.jsx)(N,{className:"h-4 w-4 mr-2"}),"Coba Lagi"]})]})})}):(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Cetak Barcode"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Pilih produk dan cetak barcode dalam jumlah banyak"})]}),(0,b.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,b.jsx)("strong",{children:"Status:"}),(0,b.jsxs)("span",{className:"text-green-600",children:[i.length," produk dimuat, ",k.length," kategori dimuat"]})]})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(e.Input,{placeholder:"Cari produk atau barcode...",value:o,onChange:a=>p(a.target.value),className:"w-full"})}),(0,b.jsxs)(I.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(I.SelectTrigger,{className:"w-full sm:w-48",children:(0,b.jsx)(I.SelectValue,{placeholder:"Filter kategori"})}),(0,b.jsxs)(I.SelectContent,{children:[(0,b.jsx)(I.SelectItem,{value:"ALL",children:"Semua Kategori"}),k.map(a=>(0,b.jsx)(I.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)(I.Select,{value:u,onValueChange:a=>v(a),children:[(0,b.jsx)(I.SelectTrigger,{className:"w-full sm:w-48",children:(0,b.jsx)(I.SelectValue,{})}),(0,b.jsxs)(I.SelectContent,{children:[(0,b.jsx)(I.SelectItem,{value:"58mm",children:"58mm Thermal"}),(0,b.jsx)(I.SelectItem,{value:"80mm",children:"80mm Thermal"})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)(d.Button,{onClick:E,disabled:0===m.size,className:"whitespace-nowrap",children:[(0,b.jsx)(J.Printer,{className:"h-4 w-4 mr-2"}),"Cetak ",u," (",F," label)"]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"flex items-center justify-between",children:[(0,b.jsxs)("span",{children:["Daftar Produk (",D.length,")"]}),(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>{if(m.size===D.length)n(new Set),t({});else{let a=new Set(D.map(a=>a.id)),b={};D.forEach(a=>{b[a.id]=1}),n(a),t(b)}},disabled:0===D.length,children:m.size===D.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M,{className:"h-4 w-4 mr-2"}),"Batal Pilih Semua"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(L,{className:"h-4 w-4 mr-2"}),"Pilih Semua"]})})]})}),(0,b.jsx)(f.CardContent,{children:0===D.length?(0,b.jsx)("div",{className:"text-center py-8 text-gray-500",children:o||"ALL"!==q?"Tidak ada produk yang sesuai dengan filter":"Belum ada produk. Silakan tambah produk terlebih dahulu."}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{className:"w-12",children:"Pilih"}),(0,b.jsx)(g.TableHead,{children:"Barcode"}),(0,b.jsx)(g.TableHead,{children:"Nama Produk"}),(0,b.jsx)(g.TableHead,{children:"Kategori"}),(0,b.jsx)(g.TableHead,{children:"Harga"}),(0,b.jsx)(g.TableHead,{children:"Stok"}),(0,b.jsx)(g.TableHead,{className:"w-24",children:"Jumlah"})]})}),(0,b.jsx)(g.TableBody,{children:D.map(a=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(H,{checked:m.has(a.id),onCheckedChange:()=>(a=>{let b=new Set(m);if(b.has(a)){b.delete(a);let c={...s};delete c[a],t(c)}else b.add(a),t(b=>({...b,[a]:1}));n(b)})(a.id)})}),(0,b.jsx)(g.TableCell,{className:"font-mono text-sm",children:a.barcode}),(0,b.jsx)(g.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(h.Badge,{variant:"outline",className:"text-xs",children:a.category||"Uncategorized"})}),(0,b.jsx)(g.TableCell,{className:"font-medium",children:(0,O.formatPrice)(a.sellPrice)}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(h.Badge,{variant:a.currentStock<=5?"destructive":"secondary",children:a.currentStock})}),(0,b.jsx)(g.TableCell,{children:m.has(a.id)&&(0,b.jsx)(e.Input,{type:"number",min:"1",max:"100",value:s[a.id]||1,onChange:b=>((a,b)=>{if(b<=0){let b=new Set(m);b.delete(a),n(b);let c={...s};delete c[a],t(c)}else t(c=>({...c,[a]:b}))})(a.id,parseInt(b.target.value)||0),className:"w-16 text-center"})})]},a.id))})]})})})]}),!1]})}a.s(["default",()=>P],90704)}];

//# sourceMappingURL=src_app_dashboard_barcode_page_tsx_7910c835._.js.map